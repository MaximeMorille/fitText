(function(b){b&&b.el&&!b.el.fitText&&(b.el.fitText=function(b,c){if(this.removed||"text"!==this.type||"number"!==typeof b)return this;"string"===typeof c?this.attr("text",c):c=this.attr("text");var a=this.getBBox().width;if(a>b){a=Math.round(b/(a/c.length));a=c.substr(0,a-3);for(this.attr({text:a+"...",title:c});this.getBBox().width>b&&0<a.length;)a=a.slice(0,-1),this.attr("text",a+"...")}else this.attr("title","");return this})})(Raphael);